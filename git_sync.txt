for branch in $(git for-each-ref --format='%(refname:short)' refs/heads/); do {
  echo branch="${branch}"
  git checkout "$branch"
  git pull origin master:"$branch"
  
  if ! git_status_output="$(git status --porcelain)"; then
    # `git status` had an error
    error_code="$?"
    echo "'git status' had an error: $error_code" 
    # exit 1  # (optional)
elif [ -z "$git_status_output" ]; then
    # Working directory is clean
    echo "Working directory is clean."
else
    # Working directory has uncommitted changes.
    echo "Working directory has UNCOMMITTED CHANGES."
    git reset --merge
    git add .
    git commit -m "Merge with master"
    git push origin "$branch"
    # exit 2  # (optional)
    
fi

  
}
done